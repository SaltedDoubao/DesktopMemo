# 数据与备份

## 数据目录在哪里？

DesktopMemo 默认在可执行文件目录下创建 `/.memodata`：

```
.memodata/
├── content/                 # Markdown 备忘录文件（YAML Front Matter + 正文）
├── .logs/                   # 日志文件目录
├── settings.json            # 窗口与全局设置
├── memos.db                 # 备忘录数据库（v2.3.0+）
└── todos.db                 # 待办事项数据库（v2.3.0+）
```

> 不同版本可能存在迁移文件或兼容数据（例如早期的 `index.json`）。

## 备份建议

### 最小备份

- `settings.json`
- `memos.db`、`todos.db`
- `content/`（如果你希望保留 Markdown 正文与元信息）

### 推荐备份策略

- 退出应用后再备份，避免写入中的文件处于不一致状态
- 将 `.memodata` 整个目录定期打包备份
- 建议至少保留 3 个历史备份

## 迁移与一致性

应用启动时可能执行迁移任务（例如将旧索引迁移到 SQLite）。迁移过程中可能会触发文件时间戳更新，这是为了确保索引与文件状态一致；如遇疑问请参考 [常见问题](05_常见问题.md)。

## 数据恢复（通用做法）

1. 退出 DesktopMemo
2. 将备份的 `.memodata` 覆盖到当前版本可执行文件目录下
3. 重新启动应用

---

**最后更新**：2025-12-26

